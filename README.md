# CubesTest
Тестовое задание. Примерное время выполнения - 12 часов

## О Проекте
Небольшой проект сделанный как тестовое задание.  
Смена разрешения при существующем сейве может вывести кубики за экран, в остальном должно хорошо масштабироваться.  
Сейв в формате json находится в `Application.persistentDataPath`, для Windows это `[Диск]\Users\[User]\AppData\LocalLow\APodkopaev\Cubes`
Для запуска в редакторе нужно открыть сцену `GameScene`


## Использованный стек
Zenject, DOTween, Newtonsoft JSON, Addressables

## Ключевые моменты
### Описание структуры
Геймплей завязан на 3х классах: `CubesModel`, `CubesController` и `CubeTowerView`.  
`CubesModel` занимается управлением стейта и проверкой правил установки.  
`CubesController` занимается перетаскиванием кубиков и проверкой валидности их размещения на поле игры.  
`CubeTowerView` содержит всё необходимое для взаимодействия с полем игры и правильным отображением башни на экране(в нём так же содержится логика определяющая рамки игры, так как они завязаны на размер экрана).  

При запуске игра инициализируется при помощи `Bootstrap`, который просто скрипт, стоящий пораньше в Script Execution Order, было сделано чтобы не разбивать проект на несколько сцен и дать возможность ему проинициализировать всё что нужно.
Игра обращается к конфигам(цвета кубиков) через `Configs`, взаимодействует со стейтом игрока через `GameStateSystem`. Выводит сообщения через `LogTextView`

### Конфиги
Одним из условий тестового была возможность заменять способ загрузки конфигов, в проекте он реализован через `ConfigsLoaderBase`, который наследуется в `SOConfigLoader` и `JsonConfigLoader` любой класс в проекте можно сделать загружаемым через эту систему добавив аттрибут     `[Config("Название_файла_конфига")]` тогда при запросе конфига через `ConfigsLoaderBase.LoadConfigObject<ConfigClass>` он автоматически попытается загрузить файл из соотвествующей папки и получить объект конфига оттуда.   
Для Scriptable Object так же необходимо реализовать в самом скриптбл объекте интерфейс `ISOConfigProvider<ConfigClass>` чтобы он смог собрать объект конфига или выдать его, если он лежит прямо в нужном виде.  
  
В проекте реализовано оба вида загрузки, переключить их можно закомментировав ненужный вид и раскомментировав нужный в `GameInstaller`:  
<img width="691" height="58" alt="image" src="https://github.com/user-attachments/assets/15e70b12-4a8e-437f-bc9e-60e442582436" />  
### Локализация
Одно из условий в задании было учесть потенциальную необходимость локализировать в дальнейшем текст, поэтому в проекте есть заглушечный класс локализации `StubLocalizationProvider`, в котором захардкожены фразы, однако через него можно получать фразы по ключам и переключать язык вызовом `SetLanguage(идентификатор языка)`("en" и "ru"), так же сами запросы фраз по ключам есть в проекте как реакция на действия игрока с кубиками.
### Стоящее внимания
Драг-н-Дроп со скролла реализован через `ScrollDragnDropFallthrough`, который передаёт перетаскивание на скролл пока не будут выполнены условия для перетаскивания объекта(в проекте это условие - отдаление курсора от объекта, обычно вверх, но так же работает когда скролл упирается в край), можно добавить новые условия(например перетаскивание после удержания) наследуя `ScrollDragnDropFallthrough` по примеру `DistanceThresholdFallthrough`  

